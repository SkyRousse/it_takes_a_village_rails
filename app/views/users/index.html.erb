<script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('village-map'), {
          center: {lat: 45.528207, lng: -122.682794},
          zoom: 10,
          styles:
          [{"elementType":"geometry","stylers":[{"color":"#f5f5f5"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#f5f5f5"}]},{"featureType":"administrative.land_parcel","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"administrative.neighborhood","elementType":"geometry","stylers":[{"color":"#066cab"}]},{"featureType":"administrative.neighborhood","elementType":"geometry.fill","stylers":[{"color":"#fa0593"},{"weight":2.5}]},{"featureType":"administrative.neighborhood","elementType":"geometry.stroke","stylers":[{"color":"#b61678"},{"weight":2.5}]},{"featureType":"administrative.neighborhood","elementType":"labels.icon","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.neighborhood","elementType":"labels.text.fill","stylers":[{"color":"#fa0593"},{"weight":8}]},{"featureType":"landscape.man_made","elementType":"geometry.fill","stylers":[{"color":"#fefcfc"}]},{"featureType":"landscape.natural","elementType":"geometry.fill","stylers":[{"color":"#f3fbf3"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#dadada"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"transit.station","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#c9c9c9"}]},{"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#e7f7f8"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]}]
        });
        <% if @users %>
        <% @users.each do |user| %>
        var marker<%=user.id%> = new google.maps.Marker({
          position: {lat: <%=user.latitude%>, lng: <%=user.longitude%>},
          map: map,
          title: 'Hello World!'
        });
        marker<%=user.id%>.addListener('click', function() {
          infowindow<%=user.id%>.open(map, marker<%=user.id%>);
        });
        <% end %>
        <%end%>
      }
    </script>

<div style='width: 1200px;' class="row">
  <div id="village-map" style='width: 1000px; height: 600px;' class="col-sm-10"></div>
  <div class="col-sm-2">

  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLgKNQvjmYhaUlQ4ftPVBEnuE91ntawAs&v=3&callback=initMap"
async defer></script>
