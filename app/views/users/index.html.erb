<script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('village-map'), {
          center: {lat: 45.528207, lng: -122.682794},
          zoom: 11,
        });
        <% if @users %>
        <% @users.each do |user| %>
        var marker<%=user.id%> = new google.maps.Marker({
          position: {lat: <%=user.latitude%>, lng: <%=user.longitude%>},
          map: map,
          title: 'Hello World!'
        });
        marker<%=user.id%>.addListener('click', function() {
          infowindow<%=user.id%>.open(map, marker<%=user.id%>);
        });
        <% end %>
        <%end%>
      }
    </script>

<div style='width: 1200px;' class="row">
  <div id="village-map" style='width: 1000px; height: 600px;' class="col-sm-10"></div>
  <div class="col-sm-2">

  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLgKNQvjmYhaUlQ4ftPVBEnuE91ntawAs&callback=initMap"
async defer></script>
